<div class="content-i asset-container">

  <access-role-top-menu></access-role-top-menu>

  <div class="content-box">
    <div class="row">
      <div class="col-sm-12">
        <div class="element-wrapper">
          <div class="element-box">
            <form [formGroup]="resourceForm" (ngSubmit)="onCreate()">
              <h5 class="form-header">
                New Resource Form
              </h5>

              <div [hidden]="doNotDisplayFailureMessage" class="alert alert-danger">Failed to create resource.</div>

              <fieldset class="form-group">
                <div class="form-group">
                  <label for="Name">Name</label><input class="form-control" formControlName="name" placeholder="Name" required="required" type="text">
                  <div [hidden]="name.valid || name.pristine" class="alert alert-danger">Invalid name.</div>
                </div>
              </fieldset>

              <fieldset class="form-group">
                <div class="form-group">
                  <label for="">Resource Type</label>
                  <ng2-completer [datasource]="resourceTypeIdDataService"
                                 [inputClass]="'form-control form-control-inline'"
                                 [minSearchLength]="0"
                                 [maxChars]="4"
                                 [inputClass]="'form-control'"
                                 [placeholder]="'Search for Resource Type'"
                                 [matchClass]="'match'"
                                 formControlName="resourceTypeId"
                                 [autofocus]="true"
                                 [clearUnselected]="true"
                                 [openOnClick]="true"
                                 [textSearching]="false"
                                 (selected)="onResourceTypeIdSelect($event)">
                  </ng2-completer>
                </div>
              </fieldset>

              <!-- start of permissions -->
              <div class="row">
                <div class="col-sm-6">
                  <h6 class="text-center">
                    Available Permissions
                  </h6>
                  <div class="table-responsive table-section">
                    <table class="table table-striped table-lightfont table-full-width">
                      <thead>
                      <tr>
                        <th>name</th>
                        <th>description</th>
                      </tr>
                      </thead>
                      <tfoot>
                      <tr>
                        <th>name</th>
                        <th>description</th>
                      </tr>
                      </tfoot>
                      <tbody>
                      <tr class="clickable-tr" role="row" *ngFor="let permission of permissions.permissions; let index = index; let isOdd=odd; let isEven=even" [class.odd]="isOdd" [class.even]="isEven" (dblclick)="onPermissionDoubleClick(permission.name,permission.permissionId)">
                        <td>{{permission.name}}</td>
                        <td>{{permission.description}}</td>
                      </tr>
                      <tr *ngIf="permissions.permissions.length <= 0" class="odd">
                        <td valign="top" align="" colspan="7" class="dataTables_empty no-table-data-td no-data-center">No data available in table</td>
                      </tr>
                      </tbody>
                    </table>
                    <paging [page]="permissions.page" (requestPage)="onRequestPage($event, 'permissions')"></paging>
                  </div>
                </div>
              <!-- end of permissions -->

              <!-- start of  resource permissions -->

                <div class="col-sm-6">
                  <h6 class="text-center">
                    Assigned Permissions
                  </h6>
                  <div class="table-responsive table-section">
                    <table class="table table-striped table-lightfont table-full-width">
                      <thead>
                      <tr>
                        <th>name</th>
                        <th>description</th>
                      </tr>
                      </thead>
                      <tfoot>
                      <tr>
                        <th>name</th>
                        <th>description</th>
                      </tr>
                      </tfoot>
                      <tbody>
                      <tr class="clickable-tr" role="row" *ngFor="let resourcePermission of resourcePermissions.permissions; let index = index; let isOdd=odd; let isEven=even" [class.odd]="isOdd" [class.even]="isEven"(dblclick)="onResourceDoubleClick(resourcePermission.permissionId)" >
                        <td>{{resourcePermission.name}}</td>
                        <td>{{resourcePermissions.description}}</td>
                      </tr>
                      <tr *ngIf="resourcePermissions.permissions.length <= 0" class="odd">
                        <td valign="top" align="" colspan="7" class="dataTables_empty no-table-data-td no-data-center">No data available in table</td>
                      </tr>
                      </tbody>
                    </table>
                    <paging [page]="resourcePermissions.page" (requestPage)="onRequestPage($event,'resource-permissions')"></paging>
                  </div>
                </div>
              </div>
              <!-- end of permissions -->

              <fieldset class="form-group">
                <div class="form-group">
                  <label for="description">Description</label><input class="form-control" formControlName="description" placeholder="Description" type="text">
                  <div [hidden]="description.valid || description.pristine" class="alert alert-danger">Invalid description.</div>
                </div>
              </fieldset>

              <div class="form-buttons-w">
                <button class="btn btn-primary button1" [disabled]="!resourceForm.valid" type="submit"> Submit</button>
                <button class="btn btn-white" type="cancel" (click)="cancel()"> Cancel</button>
              </div>

            </form>

          </div>
        </div>
      </div>
    </div>
  </div>

</div>
