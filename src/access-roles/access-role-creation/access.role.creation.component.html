<div class="content-i asset-container">

  <div class="content-box">
    <div class="row">
      <div class="col-sm-12">
        <div class="element-wrapper">
          <div class="element-box">
            <form [formGroup]="accessRoleForm" (ngSubmit)="onCreate()" id="formValidate">
              <h5 class="form-header">
                New Access Role Form
              </h5>

              <div [hidden]="doNotDisplayFailureMessage" class="alert alert-danger">Failed to create access role.</div>

              <fieldset class="form-group">
                <div class="form-group">
                  <label for="Name">Name</label><input class="form-control" formControlName="name" placeholder="Name" required="required" type="text">
                  <div [hidden]="name.valid || name.pristine" class="alert alert-danger">Invalid name.</div>
                </div>
              </fieldset>

              <fieldset class="form-group">
                <div class="form-group">
                  <label for="Enter Access Role Type">Access Role Type</label>
                  <ng2-completer [datasource]="accessRoleTypeDataService"
                                 [inputClass]="'form-control form-control-inline'"
                                 [minSearchLength]="0"
                                 [maxChars]="4"
                                 [inputClass]="'form-control'"
                                 [placeholder]="'Search for Access Role Type'"
                                 [matchClass]="'match'"
                                 formControlName="accessRoleTypeId"
                                 [autofocus]="true"
                                 [clearUnselected]="true"
                                 [openOnClick]="true"
                                 [textSearching]="false"
                                 (selected)="onAccessRoleTypeSelect($event)">
                  </ng2-completer>
                </div>
              </fieldset>

              <fieldset class="form-group">
                <div class="form-check">
                  <label class="form-check-label"><input class="form-check-input" formControlName="prohibitionIndicator" type="checkbox">Prohibition Indicator</label>
                </div>
              </fieldset>

              <div class="row">
                <div class="col-sm-6">
                  <fieldset class="form-group">
                    <div class="form-group">
                      <label for="effective date"> Effective Date</label>
                      <div class="date-input">
                        <input class="form-control" formControlName="effectiveDate" type="date">
                      </div>
                    </div>
                  </fieldset>
                </div>

                <div class="col-sm-6">
                  <fieldset class="form-group">
                    <div class="form-group">
                      <label for="until date">Until Date</label>
                      <div class="date-input">
                        <input class="form-control"  formControlName="untilDate" type="date">
                      </div>
                    </div>
                  </fieldset>
                </div>
              </div>

                <!-- start of  assigned Resources & Permissions -->
              <h6 class="text-center">
                Resources & Permissions
              </h6>
              <div class="table-responsive table-section">
                <table class="table table-striped table-lightfont table-full-width">
                  <thead>
                  <tr>
                    <th>name</th>
                    <th>Type</th>
                    <th>Permissions</th>
                  </tr>
                  </thead>
                  <tfoot>
                  <tr>
                    <th>name</th>
                    <th>Type</th>
                    <th>Permissions</th>
                  </tr>
                  </tfoot>
                  <tbody>
                  <tr role="row" *ngFor="let resource of resources.resources; let index = index; let isOdd=odd; let isEven=even" [class.odd]="isOdd" [class.even]="isEven">
                    <td>{{resource.name}}</td>
                    <td>{{resource.resourceType.name}}</td>
                    <td>
                      <ul id="resourceMenu">
                        <li *ngFor="let permission of getPermission(resource.resourceId)">
                          <label class="form-check-label"><input class="form-check-input" type="checkbox" (change)="onPermissionsChange($event, resource.resourceId,permission.resourcePermissionId)">{{permission.permission.name}}</label>
                        </li>
                      </ul>
                    </td>
                  </tr>
                  <tr *ngIf="resources.resources.length <= 0" class="odd">
                    <td valign="top" align="" colspan="7" class="dataTables_empty no-table-data-td no-data-center">No data available in table</td>
                  </tr>
                  </tbody>
                </table>
                <paging [page]="resources.page" (requestPage)="onRequestPage($event)"></paging>
              </div>
              <!-- end of Assigned Resources & Permissions-->

              <fieldset class="form-group">
                <div class="form-group">
                  <label for="description">Description</label><input class="form-control" formControlName="description" placeholder="Description" type="text">
                  <div [hidden]="description.valid || description.pristine" class="alert alert-danger">Invalid description.</div>
                </div>
              </fieldset>

              <div class="form-buttons-w">
                <button class="btn btn-primary button1" [disabled]="!accessRoleForm.valid" type="submit"> Submit</button>
                <button class="btn btn-white" type="cancel" (click)="cancel()"> Cancel</button>
              </div>

            </form>

          </div>
        </div>
      </div>
    </div>
  </div>

</div>
