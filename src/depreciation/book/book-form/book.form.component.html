<div class="content-i">

  <div class="content-box">
    <div class="row">
      <div class="col-sm-12">
        <div class="element-wrapper">
          <div class="element-box">
            <form [formGroup]="depreciationForm" id="formValidate">
              <h5 class="form-header">
                {{ depreciationExist ? "Edit": "New"}} Book Depreciation
              </h5>

              <div [hidden]="doNotDisplayFailureMessage" class="alert alert-danger">Failed to {{ depreciationExist ? "Update": "Create"}} Book Depreciation.</div>

              <fieldset class="form-group">
                <div class="form-group" [class]="(assetId.valid) ? 'ng2-completer-valid':'ng2-completer-invalid'">
                  <label for="asset">Asset</label>
                  <ng2-completer [datasource]="assetDataService"
                                 [minSearchLength]="0"
                                 [maxChars]="4"
                                 [inputClass]="'form-control'"
                                 [placeholder]="'Select available Asset'"
                                 [matchClass]="'match'"
                                 formControlName="assetId"
                                 [autofocus]="true"
                                 [clearUnselected]="true"
                                 [fillHighlighted]="false"
                                 [openOnClick]="true"
                                 [textSearching]="false"
                                 (selected)="onAssetSelect($event)"
                                 id="asset"
                                 required>
                  </ng2-completer>
                  <div [hidden]="assetId.valid || assetId.pristine" class="alert alert-danger">Please Select an Asset.</div>
                </div>
              </fieldset>

              <fieldset class="form-group">
                <div class="form-group">
                  <label for="depreciation-method">Depreciation Method</label><br/>
                  <select id="depreciation-method" class="form-control" formControlName="method" name="method" required>
                    <option value="" disabled selected>Select a Depreciation Method</option>
                    <option *ngFor="let depMethod of depreciationMethod" [value]="depMethod.methodId">{{depMethod.name}}</option>
                  </select>
                  <div [hidden]="method.valid || method.pristine" class="alert alert-danger">Please Select a Depreciation Method.</div>
                </div>
              </fieldset>

              <fieldset class="form-group">
                <div class="form-group">
                  <label for="purchase-date">Purchase Date</label>
                  <div class="date-input">
                    <input class="form-control" formControlName="purchaseDate" type="date" id="purchase-date" required>
                  </div>
                </div>
              </fieldset>

              <fieldset class="form-group">
                <div class="form-group">
                  <label for="cost">Cost</label><input  id="cost" class="form-control" formControlName="cost" data-error="invalid number" placeholder="Cost of asset" type="number" required>
                  <div [hidden]="cost.valid || cost.pristine" class="alert alert-danger">Please Enter Cost of Asset.</div>
                </div>
              </fieldset>

              <fieldset class="form-group">
                <div class="form-group">
                  <label for="salvage-value">Salvage Value</label><input  id="salvage-value" class="form-control" formControlName="salvageVal" data-error="invalid number" placeholder="Enter Salvage Value" type="number" required>
                  <div [hidden]="salvageVal.valid || salvageVal.pristine" class="alert alert-danger">Please Enter Salvage Value of Asset.</div>
                </div>
              </fieldset>

              <fieldset *ngIf="method.value !== 'unit-of-production'" class="form-group">
                <div class="form-group">
                  <label for="life">Useful Life </label><input  id="life" class="form-control" formControlName="usefulLife" data-error="invalid number" placeholder="Useful Life of asset" type="number" [required]="!requiredState">
                  <div [hidden]="usefulLife.valid || usefulLife.pristine" class="alert alert-danger">Please Enter Expected Useful Life.</div>
                </div>
              </fieldset>

              <fieldset *ngIf="method.value === 'unit-of-production'" class="form-group">
                <div class="form-group">
                  <label for="number-of-units-produced">Number Of Units Produced</label><input  id="number-of-units-produced" class="form-control" formControlName="unitProduced" data-error="invalid number" placeholder="Units produced for each year separated by commas eg 10000,20000,30000" type="text">
                  <div [hidden]="unitProduced.valid || unitProduced.pristine" class="alert alert-danger">Enter the units produced for each year separated by commas.</div>
                </div>
              </fieldset>

              <fieldset *ngIf="method.value === 'unit-of-production'" class="form-group">
                <div class="form-group">
                  <label for="total-units-produced">Estimated Machine Total Units Produced</label><input  id="total-units-produced" class="form-control" formControlName="totalUnits" data-error="invalid number" placeholder="Estimated total units produced for useful life" type="number" [required]="requiredState">
                  <div [hidden]="totalUnits.valid || totalUnits.pristine" class="alert alert-danger">Value must be the estimated sum of all unit the asset can produced over it useful life.</div>
                </div>
              </fieldset>

              <div class="form-buttons-w">
                <button class="btn btn-primary button1" [hidden]="depreciationExist" [disabled]="!depreciationForm.valid" type="submit" (click)="onCreate()"> Submit</button>
                <button class="btn btn-primary button1" [hidden]="!depreciationExist" [disabled]="!depreciationForm.valid" type="submit" (click)="onUpdate()"> Update</button>
                <button class="btn btn-outline-danger" type="button" (click)="cancel()"> Cancel</button>
              </div>

            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
